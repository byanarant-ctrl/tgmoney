<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>Budget Mini App</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
  </head>
  <body>
    <div class="bg"></div>
    <main class="app">
      <header class="top">
        <div class="title">Общий бюджет</div>
        <strong id="balance">0.00</strong>
        <div class="subtitle">Разница между доходами и расходами</div>
      </header>

      <section class="main-actions">
        <button class="pill income" data-target="income">
          + Доходы
        </button>
        <button class="pill expense" data-target="expense">
          - Расходы
        </button>
      </section>

      <section class="quick-actions">
        <button class="ghost" data-target="invite">Пригласить</button>
      </section>

      <section class="plans">
        <div class="plans-header">
          <h3>Планы</h3>
        </div>
        <div id="plans-list" class="plans-list"></div>
      </section>

      <section class="panel hidden" id="panel-income">
        <h2>Доходы</h2>
        <div class="form">
          <input id="income-amount" type="number" min="0" step="0.01" placeholder="Сумма" />
          <input id="income-desc" type="text" maxlength="120" placeholder="Описание" />
          <button id="income-add">Добавить доход</button>
        </div>
        <div class="quick">
          <button data-summary="income:week">Неделя</button>
          <button data-summary="income:month">Месяц</button>
          <button data-summary="income:year">Год</button>
        </div>
        <div class="result" id="income-result"></div>
        <div class="list" id="income-list"></div>
        <button class="back">Назад</button>
      </section>

      <section class="panel hidden" id="panel-expense">
        <h2>Расходы</h2>
        <div class="form">
          <input id="expense-amount" type="number" min="0" step="0.01" placeholder="Сумма" />
          <input id="expense-desc" type="text" maxlength="120" placeholder="Описание" />
          <button id="expense-add">Добавить расход</button>
        </div>
        <div class="quick">
          <button data-summary="expense:week">Неделя</button>
          <button data-summary="expense:month">Месяц</button>
          <button data-summary="expense:year">Год</button>
        </div>
        <div class="result" id="expense-result"></div>
        <div class="list" id="expense-list"></div>
        <button class="back">Назад</button>
      </section>

      <section class="panel hidden" id="panel-plans">
        <h2>Планы</h2>
        <p>Этот раздел теперь доступен на главном экране.</p>
        <button class="back">Назад</button>
      </section>

      <section class="panel hidden" id="panel-invite">
        <h2>Пригласить</h2>
        <div class="form">
          <button id="invite-create">Создать код</button>
          <div class="result" id="invite-code"></div>
        </div>
        <div class="form">
          <input id="join-code" type="text" maxlength="16" placeholder="Код приглашения" />
          <button id="join-submit">Присоединиться</button>
        </div>
        <div class="form">
          <button id="leave-budget">Выйти из общего бюджета</button>
        </div>
        <div class="form hidden" id="kick-form">
          <input id="kick-id" type="number" placeholder="Telegram ID" />
          <button id="kick-submit">Удалить пользователя</button>
        </div>
        <div class="result" id="invite-result"></div>
        <button class="back">Назад</button>
      </section>

      <section class="panel hidden" id="panel-plan-create">
        <h2>Новый план</h2>
        <div class="form">
          <input id="plan-title" type="text" maxlength="80" placeholder="Название" />
          <input id="plan-desc" type="text" maxlength="140" placeholder="Описание" />
          <input id="plan-amount" type="number" min="0" step="0.01" placeholder="Сумма" />
          <button id="plan-save">Сохранить</button>
        </div>
        <div class="result" id="plan-result"></div>
        <button class="back">Назад</button>
      </section>

      <section class="panel hidden" id="panel-error">
        <h2>Ошибка</h2>
        <p id="error-message"></p>
      </section>
    </main>
    <button class="fab" id="plan-add" aria-label="Добавить план">+</button>
    <script src="app.js"></script>
  </body>
</html>
